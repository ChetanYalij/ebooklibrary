<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>{{ book.title }} ‚Ä¢ E-BookLibrary</title>

        <meta name="viewport" content="width=device-width, initial-scale=1.0">

        <!-- Tailwind + DaisyUI -->
        <script src="https://cdn.tailwindcss.com"></script>
        <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet"/>
    </head>

    <body class="bg-base-100 text-base-content min-h-screen flex flex-col">

        <!-- ================= NAVBAR ================= -->
        <div class="navbar bg-base-200 shadow-lg flex flex-col md:flex-row gap-3 px-4">

            <div class="flex-1">
                <a href="{{ url_for('index') }}"
                   class="btn btn-ghost text-lg md:text-xl font-bold">
                    ‚Üê Back to Library
                </a>
            </div>

            <div class="flex gap-2 w-full md:w-auto justify-end">
                {% if session.get("user_id") %}
                <a href="{{ url_for('logout') }}"
                   class="btn btn-error btn-sm w-full md:w-auto">
                    Logout
                </a>
                {% else %}
                <a href="{{ url_for('login') }}"
                   class="btn btn-primary btn-sm w-full md:w-auto">
                    Login
                </a>
                {% endif %}
            </div>
        </div>

        <!-- ================= BOOK DETAIL ================= -->
        <div class="max-w-5xl mx-auto px-4 md:px-6 py-6 md:py-12 w-full">

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 md:gap-10">

                <!-- BOOK COVER -->
                <div>
                    {% if book.cover_url %}
                    <img src="{{ book.cover_url }}"
                         alt="Book Cover"
                         class="rounded-xl shadow-lg w-full max-h-[320px] md:max-h-[450px] object-cover">
                    {% else %}
                    <div class="h-[320px] md:h-[450px] flex items-center justify-center bg-base-200 rounded-xl">
                        <span class="opacity-60">No Cover Image</span>
                    </div>
                    {% endif %}
                </div>

                <!-- BOOK INFO -->
                <div>
                    <h1 class="text-2xl md:text-3xl font-bold mb-2">
                        {{ book.title }}
                    </h1>

                    <p class="text-sm md:text-lg opacity-80 mb-4">
                        by {{ book.author }}
                    </p>

                    <span class="badge badge-primary mb-4">
                        {{ book.category }}
                    </span>

                    <p class="mt-6 text-sm leading-relaxed opacity-90">
                        {{ book.description or "No description available." }}
                    </p>

                    <!-- ACTION BUTTONS -->
                    <div class="mt-8 flex gap-3 flex-col sm:flex-row">

                        {% if book.pdf_url %}
                        <a href="https://docs.google.com/gview?embedded=true&url={{ book.pdf_url }}"
                           class="btn btn-success w-full sm:w-auto">
                            üìñ Read Online
                        </a>


                        {% else %}
                        <span class="text-error">PDF not available</span>
                        {% endif %}

                    </div>

                </div>
            </div>
        </div>

        <!-- ================= FOOTER ================= -->
        <footer class="footer p-4 md:p-6 bg-base-200 text-base-content mt-auto">
            <div class="mx-auto text-center opacity-70 text-sm">
                ¬© 2026 ‚Ä¢ E-BookLibrary ‚Ä¢ College Project
            </div>
        </footer>

        <!-- ================= PDF READER MODAL ================= -->
        <dialog id="pdfModal" class="modal">
            <div class="modal-box w-11/12 max-w-5xl h-[80vh] p-0">

                <div class="flex justify-between items-center p-3 bg-base-200">
                    <h3 class="font-bold text-base md:text-lg">
                        Reading: {{ book.title }}
                    </h3>
                    <form method="dialog">
                        <button class="btn btn-sm btn-error">‚úï</button>
                    </form>
                </div>

                {% if read_mode %}
                <div class="mt-6 w-full">
                    <iframe
                        src="{{ book.pdf_url }}"
                        class="w-full h-[90vh] border rounded-lg"
                        loading="lazy">
                    </iframe>
                </div>
                {% endif %}


            </div>
        </dialog>

        <script>
function openReader() {
    document.getElementById("pdfModal").showModal();
}
        </script>

    </body>
</html>
